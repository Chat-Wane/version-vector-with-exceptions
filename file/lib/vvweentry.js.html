<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <base data-ice="baseUrl" href="../../">
  <title data-ice="title">lib/vvweentry.js | version-vector-with-exceptions API Document</title>
  <link type="text/css" rel="stylesheet" href="css/style.css">
  <link type="text/css" rel="stylesheet" href="css/prettify-tomorrow.css">
  <script src="script/prettify/prettify.js"></script>
  
  
  <script src="script/manual.js"></script>
</head>
<body class="layout-container" data-ice="rootContainer">

<header>
  <a href="./">Home</a>
  
  <a href="identifiers.html">Reference</a>
  <a href="source.html">Source</a>
  
  <a data-ice="repoURL" href="https://github.com/chat-wane/version-vector-with-exceptions.git" class="repo-url-github">Repository</a>
  <div class="search-box">
  <span>
    <img src="./image/search.png">
    <span class="search-input-edge"></span><input class="search-input"><span class="search-input-edge"></span>
  </span>
    <ul class="search-result"></ul>
  </div>
</header>

<nav class="navigation" data-ice="nav"><div>
  <ul>
    
  <li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/lib/pair.js~Pair.html">Pair</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/lib/vvwe.js~VVwE.html">VVwE</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/lib/vvweentry.js~VVwEEntry.html">VVwEEntry</a></span></span></li>
</ul>
</div>
</nav>

<div class="content" data-ice="content"><h1 data-ice="title">lib/vvweentry.js</h1>
<pre class="source-code line-number raw-source-code"><code class="prettyprint linenums" data-ice="content">&apos;use strict&apos;;

/**
 *  Create an entry of the version vector with exceptions containing the index
 *  of the entry, the value v that creates a contiguous interval from 0 to v,
 *  an array of integers that contains the operations lower to v that have not
 *  been received yet.
 */
class VVwEEntry {
    /**
     * @param {Object} e The entry in the interval version vector.
     */
    constructor (e) {
        this.e = e;   
        this.v = 0;
        this.x = [];
    };

    /**
     * Increment the local counter.
     */
    increment () {
        this.v += 1;
    };

    /**
     * Increment from a remote operation.
     * @param {Number} c the counter of the operation to add to this.
     */
    incrementFrom (c) {
        // #1 check if the counter is included in the exceptions
        if (c &lt; this.v){
            const index = this.x.indexOf(c);
            if (index &gt;= 0) { // the exception is found
                this.x.splice(index, 1);
            };
        };
        // #2 if the value is +1 compared to the current value of the vector
        if (c === (this.v + 1)) {
            this.v += 1;
        };
        // #3 otherwise exceptions are made
        if (c &gt; (this.v + 1)) {
            for (let i = (this.v + 1); i &lt; c; ++i){
                this.x.push(i);
            };
            this.v = c;
        };
    };

    /**
     * Comparison function between two VVwE entries.
     * @param {VVwEEntry} a The first element.
     * @param {VVwEEntry} b The second element.
     * @return -1 if a &lt; b, 1 if a &gt; b, 0 otherwise
     */
    static comparator (a, b) {
        const aEntry = (a.e) || a;
        const bEntry = (b.e) || b;
        if (aEntry &lt; bEntry) { return -1; };
        if (aEntry &gt; bEntry){ return  1; };
        return 0;
    };

};

module.exports = VVwEEntry;
</code></pre>

</div>

<footer class="footer">
  Generated by <a href="https://esdoc.org">ESDoc<span data-ice="esdocVersion">(0.5.2)</span><img src="./image/esdoc-logo-mini-black.png"></a>
</footer>

<script src="script/search_index.js"></script>
<script src="script/search.js"></script>
<script src="script/pretty-print.js"></script>
<script src="script/inherited-summary.js"></script>
<script src="script/test-summary.js"></script>
<script src="script/inner-link.js"></script>
<script src="script/patch-for-local.js"></script>
</body>
</html>
